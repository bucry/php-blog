﻿/**
 * @name jQuery waterfall Plugin
 * @version 1.0.6
 * @create 2012.1.30
 * @lastmodified 2012.2.11
 * @description Based on jQuery 1.4+
 * @author MuFeng (http://mufeng.me)
 * @url http://mufeng.me/waterfall.html
 **/
~function(f){var h=[],i=0,j=function(b,a){this.options=b;this.element=f(a);if(this.options.isRelist){this.reInit()}else{this.init()}};j.prototype={init:function(){this.initArg();this.reSize();this.layout(this.getBricks(this.element))},reInit:function(){var c=this.options.isRelist-1,b=this.options.isReheight;h[c]+=b;var a=Math.max.apply(Math,h);this.element.height(a)},getBricks:function(a){var b=this.options.itemSelector;return $bricks=!b?a.children().not(".waterfall"):a.filter(b).not(".waterfall").add(a.find(b))},getSize:function(){var c=this.getBricks(this.element)[0],e=f(c),b=this.options.columnCount,r=this.options.columnWidth,d=[],n=e.outerWidth(true),q=f(window).width()-20,a=!r?n:r,p=!b?parseInt(q/a):b;return d.concat(a,p)},initArg:function(){if(!i){var c,a=this.getSize(),b=a[1];for(c=0;c<b;c++){h[c]=0}i=1}},reSize:function(){this.element.css("position","relative");if(this.options.isResizable){var a=this.getSize(),b=a[1],c=a[0];this.element.css({width:b*c})}},layout:function(a){var n=0,J=this.element,E=a.length,b=J.filter("img").add(J.find("img")).eq(0),G=b.parent(),C=this.options.isAnimated,c=this.options.Duration,D=this.options.Easing,e=this.options.endFn,d=this.getSize(),I=d[0],F,H=G.width()-parseInt(b.css("padding-left"))-parseInt(b.css("padding-right"))-parseInt(b.css("margin-left"))-parseInt(b.css("margin-right"));a.css("display","none");var B=(function(){var k=[],m=null,o=function(){var p=0;for(;p<k.length;p++){k[p].end?k.splice(p--,1):k[p]()}!k.length&&l()},l=function(){clearTimeout(m);m=null};return function(q,v,u,x){var L,p,s,z,r,A=new Image();A.src=q;if(A.complete){v(A.width,A.height);u&&u(A.width,A.height);return}p=A.width;s=A.height;L=function(){z=A.width;r=A.height;if(z!==p||r!==s||z*r>1024){v(z,r);L.end=true}};L();A.onerror=function(){x&&x();z=r=0;v(z,r);L.end=true;A=A.onload=A.onerror=null};A.onload=function(){u&&u(A.width,A.height);!L.end&&L();A=A.onload=A.onerror=null};if(!L.end){k.push(L);if(m===null){m=setTimeout(o,50)}}}})();t();function t(){if(n<E){var s=a[n],m=f(s),k=m.filter("img").add(m.find("img")).eq(0),q=m.outerHeight(true),l=w(h);if(k.length>0){var r=k.attr("src");k.removeAttr("src");B(r,function(x,z){x=x?x:H;z=z?z:0;y=z*H/x;x=H;k.attr("src",r).css({width:x,height:z,display:"block"});var u=Math.max.apply(Math,h);J.height(u);m.addClass("waterfall water"+(l+1));var v=m.outerHeight(true);!C?(m.css({display:"block",position:"absolute",left:l*I,top:h[l]})):(m.css({display:"block",position:"absolute",left:0,top:u}).stop().animate({left:l*I,top:h[l]},{Duration:c,Easing:D}));h[l]+=v;n++;F=setTimeout(t,50)})}else{var o=Math.max.apply(Math,h);J.height(o);m.addClass("waterfall");var p=m.outerHeight(true);!C?(m.css({display:"block",position:"absolute",left:l*I,top:h[l]})):(m.css({display:"block",position:"absolute",left:0,top:o}).stop().animate({left:l*I,top:h[l]},{Duration:c,Easing:D}));h[l]+=p;n++;F=setTimeout(t,10)}}else{if(n>=E){clearTimeout(F);F=null;var o=Math.max.apply(Math,h);J.height(o);if(typeof e=="function"){e.call(a)}}}}function w(p){var m,k=0,l=p[0],o=p.length;for(m=1;m<o;m++){if(p[m]<l){l=p[m];k=m}}return k}}};f.waterfall=function(b,a){b=f.extend({isResizable:false,isAnimated:false,Duration:500,Easing:"swing",endFn:function(){}},b);f.data(a,"waterfall",new j(b,a));return a};f.fn.waterfall=function(a){return f.waterfall(a,this)};function g(a){console.log({}.toString.call(a)+" | "+a)}}(jQuery);
﻿/**
 * @name jQuery colorTip
 **/
~(function(a){a.fn.colorTip=function(e){var d={color:"black",timeout:500};e=a.extend(d,e);return this.each(function(){var f=a(this);if(!f.attr("title")){return true}f.addClass(e.color);var i=new b();var h=f.attr("title"),g=new c(h);f.append(g.generate()).addClass("colorTipContainer");f.hover(function(){f.removeAttr("title");g.show();i.clear()},function(){i.set(function(){g.hide();f.attr("title",h)},e.timeout)})})};function b(){}b.prototype={set:function(d,e){this.timer=setTimeout(d,e)},clear:function(){this.timer=null;clearTimeout(this.timer)}};function c(d){this.content=d;this.shown=false}c.prototype={generate:function(){return this.tip||(this.tip=a('<span class="colorTip">'+this.content+'<span class="pointyTipShadow"></span><span class="pointyTip"></span></span>'))},show:function(){if(this.shown){return}this.tip.css("margin-left",-this.tip.outerWidth()/2).fadeIn("fast");this.shown=true},hide:function(){this.tip.fadeOut();this.shown=false}}})(jQuery);